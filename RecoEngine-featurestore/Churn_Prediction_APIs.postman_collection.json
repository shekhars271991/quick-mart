{
	"info": {
		"_postman_id": "churn-prediction-apis",
		"name": "Churn Prediction Microservice APIs",
		"description": "Complete API collection for the Churn Prediction Microservice with Aerospike Feature Store",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "API Service (Port 8000)",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{api_base_url}}/health",
							"host": ["{{api_base_url}}"],
							"path": ["health"]
						}
					},
					"response": []
				},
				{
					"name": "Root Endpoint",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{api_base_url}}/",
							"host": ["{{api_base_url}}"],
							"path": [""]
						}
					},
					"response": []
				},
				{
					"name": "Feature Ingestion",
					"item": [
						{
							"name": "Ingest Profile Features",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"user_001\",\n  \"account_age_days\": 365,\n  \"membership_duration\": 12,\n  \"loyalty_tier\": \"gold\",\n  \"geo_location\": \"US-CA\",\n  \"device_type\": \"mobile\",\n  \"preferred_payment_method\": \"credit_card\",\n  \"language_preference\": \"en\"\n}"
								},
								"url": {
									"raw": "{{api_base_url}}/ingest/profile",
									"host": ["{{api_base_url}}"],
									"path": ["ingest", "profile"]
								}
							},
							"response": []
						},
						{
							"name": "Ingest Behavior Features",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"user_001\",\n  \"days_since_last_login\": 2,\n  \"days_since_last_purchase\": 7,\n  \"sessions_last_7days\": 8,\n  \"sessions_last_30days\": 25,\n  \"avg_session_duration_last_30days\": 15.5,\n  \"click_through_rate_last_10_sessions\": 0.15,\n  \"cart_abandonment_rate\": 0.3,\n  \"wishlist_adds_vs_purchases\": 1.2,\n  \"content_engagement_rate\": 0.4\n}"
								},
								"url": {
									"raw": "{{api_base_url}}/ingest/behavior",
									"host": ["{{api_base_url}}"],
									"path": ["ingest", "behavior"]
								}
							},
							"response": []
						},
						{
							"name": "Ingest Transactional Features",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"user_001\",\n  \"avg_order_value\": 85.50,\n  \"total_orders_last_6months\": 12,\n  \"purchase_frequency_last_90days\": 0.08,\n  \"time_since_last_high_value_purchase\": 45,\n  \"refund_rate\": 0.05,\n  \"subscription_payment_status\": \"active\",\n  \"discount_dependency_score\": 0.4,\n  \"category_spend_distribution\": {\n    \"electronics\": 0.3,\n    \"clothing\": 0.4,\n    \"books\": 0.2,\n    \"home\": 0.1\n  }\n}"
								},
								"url": {
									"raw": "{{api_base_url}}/ingest/transactional",
									"host": ["{{api_base_url}}"],
									"path": ["ingest", "transactional"]
								}
							},
							"response": []
						},
						{
							"name": "Ingest Engagement Features",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"user_001\",\n  \"push_notification_open_rate\": 0.45,\n  \"email_click_rate\": 0.25,\n  \"in_app_offer_click_rate\": 0.18,\n  \"response_time_to_promotions\": 2.5,\n  \"recent_retention_offer_response\": \"accepted\"\n}"
								},
								"url": {
									"raw": "{{api_base_url}}/ingest/engagement",
									"host": ["{{api_base_url}}"],
									"path": ["ingest", "engagement"]
								}
							},
							"response": []
						},
						{
							"name": "Ingest Support Features",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"user_001\",\n  \"support_tickets_last_90days\": 1,\n  \"avg_ticket_resolution_time\": 4.2,\n  \"csat_score_last_interaction\": 4.5,\n  \"refund_requests\": 0\n}"
								},
								"url": {
									"raw": "{{api_base_url}}/ingest/support",
									"host": ["{{api_base_url}}"],
									"path": ["ingest", "support"]
								}
							},
							"response": []
						},
						{
							"name": "Ingest Real-time Features",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"user_001\",\n  \"current_session_clicks\": 25,\n  \"time_spent_on_checkout_page\": 120.5,\n  \"added_to_cart_but_not_bought_flag\": true,\n  \"session_bounce_flag\": false\n}"
								},
								"url": {
									"raw": "{{api_base_url}}/ingest/realtime",
									"host": ["{{api_base_url}}"],
									"path": ["ingest", "realtime"]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Churn Prediction",
					"item": [
						{
							"name": "Predict Churn - Low Risk User",
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{api_base_url}}/predict/user_001",
									"host": ["{{api_base_url}}"],
									"path": ["predict", "user_001"]
								}
							},
							"response": []
						},
						{
							"name": "Predict Churn - High Risk User",
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{api_base_url}}/predict/user_high_risk",
									"host": ["{{api_base_url}}"],
									"path": ["predict", "user_high_risk"]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Monitoring",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{api_base_url}}/monitoring",
							"host": ["{{api_base_url}}"],
							"path": ["monitoring"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Model Service (Port 8001)",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{model_base_url}}/health",
							"host": ["{{model_base_url}}"],
							"path": ["health"]
						}
					},
					"response": []
				},
				{
					"name": "Root Endpoint",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{model_base_url}}/",
							"host": ["{{model_base_url}}"],
							"path": [""]
						}
					},
					"response": []
				},
				{
					"name": "Predict Churn",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"user_id\": \"user_001\",\n  \"features\": {\n    \"days_since_last_login\": 2,\n    \"sessions_last_7days\": 8,\n    \"avg_order_value\": 85.50,\n    \"total_orders_last_6months\": 12,\n    \"account_age_days\": 365,\n    \"support_tickets_last_90days\": 1,\n    \"push_notification_open_rate\": 0.45,\n    \"cart_abandonment_rate\": 0.3,\n    \"avg_session_duration_last_30days\": 15.5,\n    \"purchase_frequency_last_90days\": 0.08\n  }\n}"
						},
						"url": {
							"raw": "{{model_base_url}}/predict",
							"host": ["{{model_base_url}}"],
							"path": ["predict"]
						}
					},
					"response": []
				},
				{
					"name": "Get Model Info",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{model_base_url}}/model/info",
							"host": ["{{model_base_url}}"],
							"path": ["model", "info"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Nudge Service (Port 8002)",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{nudge_base_url}}/health",
							"host": ["{{nudge_base_url}}"],
							"path": ["health"]
						}
					},
					"response": []
				},
				{
					"name": "Root Endpoint",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{nudge_base_url}}/",
							"host": ["{{nudge_base_url}}"],
							"path": [""]
						}
					},
					"response": []
				},
				{
					"name": "Trigger Nudge - High Risk Cart Abandonment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"user_id\": \"user_001\",\n  \"churn_probability\": 0.85,\n  \"risk_segment\": \"critical\",\n  \"churn_reasons\": [\"CART_ABANDONMENT\"]\n}"
						},
						"url": {
							"raw": "{{nudge_base_url}}/trigger",
							"host": ["{{nudge_base_url}}"],
							"path": ["trigger"]
						}
					},
					"response": []
				},
				{
					"name": "Trigger Nudge - Medium Risk Inactivity",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"user_id\": \"user_002\",\n  \"churn_probability\": 0.65,\n  \"risk_segment\": \"high\",\n  \"churn_reasons\": [\"INACTIVITY\", \"LOW_ENGAGEMENT\"]\n}"
						},
						"url": {
							"raw": "{{nudge_base_url}}/trigger",
							"host": ["{{nudge_base_url}}"],
							"path": ["trigger"]
						}
					},
					"response": []
				},
				{
					"name": "Trigger Nudge - Price Sensitivity",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"user_id\": \"user_003\",\n  \"churn_probability\": 0.68,\n  \"risk_segment\": \"high\",\n  \"churn_reasons\": [\"PRICE_SENSITIVITY\"]\n}"
						},
						"url": {
							"raw": "{{nudge_base_url}}/trigger",
							"host": ["{{nudge_base_url}}"],
							"path": ["trigger"]
						}
					},
					"response": []
				},
				{
					"name": "Get All Nudge Rules",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{nudge_base_url}}/rules",
							"host": ["{{nudge_base_url}}"],
							"path": ["rules"]
						}
					},
					"response": []
				},
				{
					"name": "Get Specific Nudge Rule",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{nudge_base_url}}/rules/rule_2",
							"host": ["{{nudge_base_url}}"],
							"path": ["rules", "rule_2"]
						}
					},
					"response": []
				},
				{
					"name": "Test Nudge Rule Matching",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[\"CART_ABANDONMENT\", \"PAYMENT_FAILURE\"]"
						},
						"url": {
							"raw": "{{nudge_base_url}}/test/user_test?churn_probability=0.85",
							"host": ["{{nudge_base_url}}"],
							"path": ["test", "user_test"],
							"query": [
								{
									"key": "churn_probability",
									"value": "0.85"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "End-to-End Workflows",
			"item": [
				{
					"name": "Complete User Journey - Low Risk",
					"item": [
						{
							"name": "1. Ingest Profile",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"journey_user_low\",\n  \"account_age_days\": 500,\n  \"membership_duration\": 18,\n  \"loyalty_tier\": \"platinum\",\n  \"geo_location\": \"US-NY\",\n  \"device_type\": \"desktop\",\n  \"preferred_payment_method\": \"credit_card\",\n  \"language_preference\": \"en\"\n}"
								},
								"url": {
									"raw": "{{api_base_url}}/ingest/profile",
									"host": ["{{api_base_url}}"],
									"path": ["ingest", "profile"]
								}
							},
							"response": []
						},
						{
							"name": "2. Ingest Behavior (Active User)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"journey_user_low\",\n  \"days_since_last_login\": 1,\n  \"days_since_last_purchase\": 3,\n  \"sessions_last_7days\": 12,\n  \"sessions_last_30days\": 45,\n  \"avg_session_duration_last_30days\": 25.0,\n  \"click_through_rate_last_10_sessions\": 0.22,\n  \"cart_abandonment_rate\": 0.15,\n  \"wishlist_adds_vs_purchases\": 0.8,\n  \"content_engagement_rate\": 0.6\n}"
								},
								"url": {
									"raw": "{{api_base_url}}/ingest/behavior",
									"host": ["{{api_base_url}}"],
									"path": ["ingest", "behavior"]
								}
							},
							"response": []
						},
						{
							"name": "3. Ingest Transactional (High Value)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"journey_user_low\",\n  \"avg_order_value\": 150.00,\n  \"total_orders_last_6months\": 25,\n  \"purchase_frequency_last_90days\": 0.15,\n  \"time_since_last_high_value_purchase\": 10,\n  \"refund_rate\": 0.02,\n  \"subscription_payment_status\": \"active\",\n  \"discount_dependency_score\": 0.2\n}"
								},
								"url": {
									"raw": "{{api_base_url}}/ingest/transactional",
									"host": ["{{api_base_url}}"],
									"path": ["ingest", "transactional"]
								}
							},
							"response": []
						},
						{
							"name": "4. Get Churn Prediction (Should be Low Risk)",
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{api_base_url}}/predict/journey_user_low",
									"host": ["{{api_base_url}}"],
									"path": ["predict", "journey_user_low"]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Complete User Journey - High Risk",
					"item": [
						{
							"name": "1. Ingest Profile",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"journey_user_high\",\n  \"account_age_days\": 90,\n  \"membership_duration\": 3,\n  \"loyalty_tier\": \"bronze\",\n  \"geo_location\": \"US-TX\",\n  \"device_type\": \"mobile\",\n  \"preferred_payment_method\": \"paypal\",\n  \"language_preference\": \"en\"\n}"
								},
								"url": {
									"raw": "{{api_base_url}}/ingest/profile",
									"host": ["{{api_base_url}}"],
									"path": ["ingest", "profile"]
								}
							},
							"response": []
						},
						{
							"name": "2. Ingest Behavior (Inactive User)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"journey_user_high\",\n  \"days_since_last_login\": 15,\n  \"days_since_last_purchase\": 45,\n  \"sessions_last_7days\": 1,\n  \"sessions_last_30days\": 3,\n  \"avg_session_duration_last_30days\": 3.5,\n  \"click_through_rate_last_10_sessions\": 0.05,\n  \"cart_abandonment_rate\": 0.85,\n  \"wishlist_adds_vs_purchases\": 3.2,\n  \"content_engagement_rate\": 0.1\n}"
								},
								"url": {
									"raw": "{{api_base_url}}/ingest/behavior",
									"host": ["{{api_base_url}}"],
									"path": ["ingest", "behavior"]
								}
							},
							"response": []
						},
						{
							"name": "3. Ingest Support (Issues)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"journey_user_high\",\n  \"support_tickets_last_90days\": 4,\n  \"avg_ticket_resolution_time\": 18.5,\n  \"csat_score_last_interaction\": 2.1,\n  \"refund_requests\": 2\n}"
								},
								"url": {
									"raw": "{{api_base_url}}/ingest/support",
									"host": ["{{api_base_url}}"],
									"path": ["ingest", "support"]
								}
							},
							"response": []
						},
						{
							"name": "4. Get Churn Prediction (Should be High Risk + Trigger Nudges)",
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{api_base_url}}/predict/journey_user_high",
									"host": ["{{api_base_url}}"],
									"path": ["predict", "journey_user_high"]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "api_base_url",
			"value": "http://localhost:8000",
			"type": "string"
		},
		{
			"key": "model_base_url",
			"value": "http://localhost:8001",
			"type": "string"
		},
		{
			"key": "nudge_base_url",
			"value": "http://localhost:8002",
			"type": "string"
		}
	]
}
