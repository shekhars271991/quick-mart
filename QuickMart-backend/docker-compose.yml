# QuickMart Backend Microservice
# Uses external shared infrastructure services from base docker-compose

services:
  quickmart-backend:
    build: .
    container_name: quickmart_backend_api
    ports:
      - "3010:3001"
    environment:
      - AEROSPIKE_HOST=quickmart_aerospike
      - AEROSPIKE_PORT=3000
      - AEROSPIKE_NAMESPACE=quick_mart
      - RECO_ENGINE_URL=http://reco_api_service:8000
      - JWT_SECRET=quickmart-jwt-secret-change-in-production
      - DEBUG=true
    volumes:
      # Mount source code for development (changes reflect immediately)
      - ./app:/app/app
      - ./data:/app/data
    networks:
      - quickmart_shared_network
    restart: unless-stopped

networks:
  quickmart_shared_network:
    external: true
